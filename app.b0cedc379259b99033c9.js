!function(e){function n(n){for(var r,u,c=n[0],i=n[1],l=n[2],d=0,f=[];d<c.length;d++)u=c[d],a[u]&&f.push(a[u][0]),a[u]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(s&&s(n);f.length;)f.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],r=!0,c=1;c<t.length;c++){var i=t[c];0!==a[i]&&(r=!1)}r&&(o.splice(n--,1),e=u(u.s=t[0]))}return e}var r={},a={0:0},o=[];function u(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,u),t.l=!0,t.exports}u.m=e,u.c=r,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,n){if(1&n&&(e=u(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)u.d(t,r,function(n){return e[n]}.bind(null,r));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var s=i;o.push([175,1]),t()}({14:function(e,n,t){"use strict";(function(e){t.d(n,"d",function(){return r}),t.d(n,"b",function(){return a}),t.d(n,"a",function(){return o}),t.d(n,"c",function(){return u});var r=e.env.BASE_URL,a=e.env.API_KEY,o=e.env.API_ID,u=e.env.API_SLUG;e.env.ZEN_DESK_URL}).call(this,t(15))},175:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(6),u=t(2),c={colors:{primary:"#6B9D33",white:"#FFFFFF",gray:"#777070",darkBlue:"#2E3E50"},typography:{small:"10pt",medium:"14pt",large:"18pt",big:"24pt"},palette:{disabled:"#F2F3F4",text:{disabled:"#989898",focus:"#62C2FA"}}},i=t(9),l=t.n(i),s=t(13),d=t.n(s),f=t(3),p=t.n(f);function m(){var e=p()(["\n    cursor: not-allowed;\n    background-color: ",";\n    color: ",";\n  "]);return m=function(){return e},e}function v(){var e=p()(["\n  padding: 14px 0;\n  width: 150px;\n  margin: 10px auto;\n  border: none;\n  font-weight: 600;\n  background-color: ",";\n  color: ",";\n  border-radius: 4px;\n  font-size: 13px;\n  cursor: pointer;\n  ","\n"]);return v=function(){return e},e}var h=u.c.button(v(),function(e){return e.theme.colors.primary},function(e){return e.theme.colors.white},function(e){var n=e.theme;return e.disabled&&Object(u.b)(m(),n.palette.disabled,n.palette.text.disabled)});var b=Object(r.memo)(function(e){var n=e.children,t=e.onClick,r=e.disabled;return a.a.createElement(h,{onClick:t,disabled:r},n)}),g=t(66);function x(){var e=p()(["\n  margin-bottom: 25px;\n\n  > div:first-child {\n    border: none;\n    background-color: #F2F3F4;\n    border-radius: 8px;\n    padding: 2.5px 0;\n    font-size: 14px;\n    width: 100%;\n    outline: none;\n    color: ",";\n  }\n\n"]);return x=function(){return e},e}var E=Object(u.c)(g.a)(x(),c.colors.darkBlue);var y=Object(r.memo)(function(e){return a.a.createElement(E,e)});function O(){var e=p()(["\n  padding: 10px;\n"]);return O=function(){return e},e}var w=u.c.input(O());var C=Object(r.memo)(function(e){var n=e.value,t=e.onChange,r=e.defaultValue,o=e.placeholder;return a.a.createElement(w,{defaultValue:r,value:n,onChange:t,placeholder:o})});function j(){var e=p()([""]);return j=function(){return e},e}var k=u.c.span(j());var S=function(){return a.a.createElement(k,null,"...Loading")};function F(){var e=p()([""]);return F=function(){return e},e}var I=u.c.span(F());var P=function(){return a.a.createElement(I,null,"Error!")};function A(){var e=p()(["\n  font-size: ",";\n  font-weight: ",";\n  color: ",";\n"]);return A=function(){return e},e}var q=u.c.span(A(),function(e){var n=e.theme,t=e.size;return t?n.typography[t]:"12pt"},function(e){e.theme;return e.bold?"bold":"normal"},function(e){var n=e.theme;return e.color?n.colors[n]:""});Object(r.memo)(function(e){var n=e.size,t=e.bold,r=e.color,o=e.children;return a.a.createElement(q,{size:n,bold:t,color:r},o)});var z=function(e,n){void 0===n&&(n=!1);var t=Object(r.useState)(!n),a=t[0],o=t[1],u=Object(r.useState)(!1),c=u[0],i=u[1],s=Object(r.useState)(null),f=s[0],p=s[1];function m(){return v.apply(this,arguments)}function v(){return(v=d()(l.a.mark(function n(){var t;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:t=n.sent,p(t),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),i(!0);case 10:return n.prev=10,o(!1),n.finish(10);case 13:case"end":return n.stop()}},n,this,[[0,7,10,13]])}))).apply(this,arguments)}return Object(r.useEffect)(function(){n||m()},[]),{loading:a,error:c,data:f,makeRequest:m}};var _=function(e){void 0===e&&(e="");var n=Object(r.useState)(e),t=n[0],a=n[1];return{value:t,onChange:function(e){a(e.target.value)}}},B=t(26);function M(){var e=p()(["\n  font-size: 14px;\n  font-weight: 600;\n  color: ","\n  display: block;\n  margin-bottom: 12px;\n"]);return M=function(){return e},e}function N(){var e=p()(["\n"]);return N=function(){return e},e}function T(){var e=p()(["\n  margin-bottom: 25px;\n\n  input {\n    border: none;\n    background-color: #F2F3F4;\n    border-radius: 8px;\n    padding: 12px;\n    font-size: 14px;\n    width: calc(100% - 24px);\n    outline: none;\n    color: ",";\n\n    ::placeholder {\n      color: #C2C6CA;\n    }\n  }\n"]);return T=function(){return e},e}function D(){var e=p()(["\n  display: flex;\n  flex-direction: column;\n"]);return D=function(){return e},e}function L(){var e=p()(["\n  display: flex;\n  flex-direction: column;\n"]);return L=function(){return e},e}function R(){var e=p()(["\n  display: flex;\n  flex-direction: column;\n  max-width: 300px;\n  margin: 20px;\n  background-color: #FFF;\n  box-shadow: 0px 0px 8px 0px #ddd;\n  border-radius: 8px;\n  padding: 20px;\n"]);return R=function(){return e},e}var V=u.c.div(R()),U=(u.c.div(L()),u.c.div(D())),G=u.c.div(T(),c.colors.darkBlue),Y=u.c.div(N()),J=u.c.label(M(),c.colors.darkBlue),K=t(7),X=t.n(K),Z=t(69),H=t.n(Z),$=t(14),Q=t(70),W=t.n(Q),ee=t(27),ne=t.n(ee),te=function(e){return e.data&&"application/x-www-form-urlencoded"===e.headers["Content-Type"]&&(e.data=ne.a.stringify(e.data)),e},re=function(e){var n=e.headers["x-access-token"];return n&&sessionStorage.setItem("token",n),e},ae=function(e){return Promise.reject(e)},oe=function(e,n){var t=W.a.create(X()({mode:"cors",baseURL:e},n));return t.request=function(e,n){var r=Object(B.defaultsDeep)(n,{headers:{Accept:"application/json","Accept-Language":"pt-BR"},paramsSerializer:function(e){return ne.a.stringify(e)}});return t(e,r).then(function(e){return e.data})},t.interceptors.request.use(te),t.interceptors.response.use(re,ae),t}($.d),ue={request:function(e,n){var t=n.noAuth,r={params:{"gw-app-key":$.b},headers:{"X-Application-Id":$.a,"X-Organization-Slug":$.c}},a=t?r:function(){var e=sessionStorage.getItem("token");return X()({},r,{headers:X()({},r.headers,{authorization:"Bearer "+e})})}();return oe.request(e,H()(n,a))}},ce={findCustomerByMSISDN:function(e){return ue.request("/v1/customers/msisdn/"+e,{method:"GET"})},createCustomer:function(e){return ue.request("/v1/customers",{method:"POST",data:e})}},ie={listCreditCards:function(e){return ue.request("/v1/credit-cards",{method:"GET",headers:{"customer-id":e}})},createCreditCard:function(e){return ue.request("/v1/credit-cards",{method:"POST",data:e})}},le={authorizePayment:function(e,n){return ue.request("/v1/payments",{method:"POST",headers:{"customer-id":n},data:e})},confirmPayment:function(e,n){return ue.request("/v1/payments/"+e,{method:"PUT",headers:{msisdn:n}})},cancelPayment:function(e,n){return ue.request("/v1/payments/"+e,{method:"DELETE",headers:{msisdn:n}})}},se=function(){return{msisdn:"123456",amount:29.9,offerId:"a51c7fb6-dd18-11e8-9f8b-f2801f1b9fd1",onError:function(){console.log("error...")},onSuccess:function(){console.log("success...")}}},de=t(71),fe=new(t.n(de).a),pe=function(e){return"string"==typeof e&&fe.isValid(e)};function me(e){var n=e.holder,t=e.creditCardNumber,r=e.expirationYear,a=e.expirationMonth,o=e.cvv;return n&&pe(t)&&r&&a&&o.match(/^\d{3}$/)||!1}var ve=function(e){e.customer;var n=e.onChange,t=_(),o=_(),u=_(),c=_();return Object(r.useEffect)(function(){console.log("teste");var e=function(e){var n=e.name,t=e.number,r=e.expiration,a=e.cvv,o=r.value&&r.value.match(/(\d{2})\/(\d{4})/);return{holder:n.value,creditCardNumber:t.value.replace(/\s/g,""),expirationMonth:o&&o[1],expirationYear:o&&o[2],cvv:a.value}}({name:t,number:o,expiration:u,cvv:c}),r=me(e);n(e,r)},[t.value,o.value,u.value,c.value]),a.a.createElement(a.a.Fragment,null,a.a.createElement(G,null,a.a.createElement(J,null,"N° do cartão"),a.a.createElement(C,X()({placeholder:"0000 0000 0000 0000"},o))),a.a.createElement(G,null,a.a.createElement(J,null,"Nome no cartão"),a.a.createElement(C,t)),a.a.createElement(G,{half:!0},a.a.createElement(J,null,"Validade"),a.a.createElement(C,X()({placeholder:"MM/AAAA"},u))),a.a.createElement(G,{half:!0},a.a.createElement(J,null,"CVV"),a.a.createElement(C,X()({placeholder:"000"},c))))};function he(e,n,t){var r=se(),a=r.amount,o=r.offerId;return e({creditCardId:n.creditCardId,cvv:"000",amount:a,offerId:o},t)}var be=function(){var e=d()(l.a.mark(function e(n,t,r){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.createCreditCard(t);case 2:return a=e.sent,console.log("---\x3e",a),e.next=6,he(le.authorizePayment,a,r);case 6:console.log("FINISHED!!!!");case 7:case"end":return e.stop()}},e,this)}));return function(n,t,r){return e.apply(this,arguments)}}();function ge(e){var n=Object(r.useState)(),t=n[0],o=n[1],u=Object(r.useState)(),c=u[0],i=u[1],s=Object(r.useState)(!1),f=s[0],p=s[1],m=e.customerId,v=!t||!t.value,h=z(function(){return he(le.authorizePayment,t,m)},!0).makeRequest,g=z(function(){return be(he,c,m)},!0).makeRequest,x=function(){var e=d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.value){e.next=4;break}h(),e.next=6;break;case 4:return e.next=6,g();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return a.a.createElement(V,null,function(e,n,t){var r=z(function(){return ie.listCreditCards(e)}),o=r.data;if(r.loading)return a.a.createElement(S,null);var u={value:null,label:"Novo cartão de crédito"},c=t||u,i=[u].concat(Object(B.map)(o,function(e){return{value:e,label:"**** **** **** "+e.lastDigits}}));return console.log(t),a.a.createElement(Y,null,a.a.createElement(J,null,"Escolha um cartão de crédito"),a.a.createElement(y,{options:i,value:c,onChange:n}))}(m,o,t),a.a.createElement(U,null,v&&a.a.createElement(ve,{customer:e,onChange:function(e,n){p(n),i(e)}})),a.a.createElement(b,{onClick:x,disabled:v&&!f},"FINALIZAR"))}var xe=function(){var e=se().msisdn,n=z(function(){return ce.findCustomerByMSISDN(e)}),t=n.data,r=n.loading;return n.error?a.a.createElement(P,null):r?a.a.createElement(S,null):ge(t)};Object(o.render)(a.a.createElement(u.a,{theme:c},a.a.createElement(xe,null)),document.getElementById("root"))}});